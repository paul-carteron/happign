<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>isochronous/isodistance calculations — get_iso • happign</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="isochronous/isodistance calculations — get_iso"><meta name="description" content="Calculates isochrones or isodistances in France from an sf object using the
IGN API on the Géoportail platform. The reference data comes from the IGN
BD TOPO® database. For further information see IGN
documentation."><meta property="og:description" content="Calculates isochrones or isodistances in France from an sf object using the
IGN API on the Géoportail platform. The reference data comes from the IGN
BD TOPO® database. For further information see IGN
documentation."><meta property="og:image" content="https://paul-carteron.github.io/happign/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">happign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/web_only/api_carto.html">API Carto</a></li>
    <li><a class="dropdown-item" href="../articles/Getting_started.html">Getting started with happign</a></li>
    <li><a class="dropdown-item" href="../articles/web_only/happign_for_foresters.html">happign for foresters</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/paul-carteron/happign/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>isochronous/isodistance calculations</h1>
      <small class="dont-index">Source: <a href="https://github.com/paul-carteron/happign/blob/main/R/get_iso.R" class="external-link"><code>R/get_iso.R</code></a></small>
      <div class="d-none name"><code>get_iso.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates isochrones or isodistances in France from an sf object using the
IGN API on the Géoportail platform. The reference data comes from the IGN
BD TOPO® database. For further information see IGN
<a href="https://geoservices.ign.fr/documentation/services/api-et-services-ogc/isochrone/api" class="external-link">documentation.</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_iso</span><span class="op">(</span><span class="va">x</span>,</span>
<span>        <span class="va">value</span>,</span>
<span>        type <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>        profile <span class="op">=</span> <span class="st">"pedestrian"</span>,</span>
<span>        time_unit <span class="op">=</span> <span class="st">"minute"</span>,</span>
<span>        distance_unit <span class="op">=</span> <span class="st">"meter"</span>,</span>
<span>        direction <span class="op">=</span> <span class="st">"departure"</span>,</span>
<span>        source <span class="op">=</span> <span class="st">"pgr"</span>,</span>
<span>        constraints <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_isodistance</span><span class="op">(</span><span class="va">x</span>,</span>
<span>                <span class="va">dist</span>,</span>
<span>                unit <span class="op">=</span> <span class="st">"meter"</span>,</span>
<span>                source <span class="op">=</span> <span class="st">"pgr"</span>,</span>
<span>                profile <span class="op">=</span> <span class="st">"car"</span>,</span>
<span>                direction <span class="op">=</span> <span class="st">"departure"</span>,</span>
<span>                constraints <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">get_isochrone</span><span class="op">(</span><span class="va">x</span>,</span>
<span>              <span class="va">time</span>,</span>
<span>              unit <span class="op">=</span> <span class="st">"minute"</span>,</span>
<span>              source <span class="op">=</span> <span class="st">"pgr"</span>,</span>
<span>              profile <span class="op">=</span> <span class="st">"car"</span>,</span>
<span>              direction <span class="op">=</span> <span class="st">"departure"</span>,</span>
<span>              constraints <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Object of class <code>sf</code> or <code>sfc</code> with POINT geometry. There may be
several points in the object. In this case, the output will contain as many
polygons as points.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p><code>numeric</code>; A quantity of time or distance.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>character</code>; Specifies the type of calculation performed:
"time" for isochrone or "distance" for isodistance (isochrone by default).</p></dd>


<dt id="arg-profile">profile<a class="anchor" aria-label="anchor" href="#arg-profile"></a></dt>
<dd><p><code>character</code>; Type of cost used for calculation: "pedestrian"
for #' pedestrians and "car" for cars. and "car" for cars ("pedestrian"
by default).</p></dd>


<dt id="arg-time-unit">time_unit<a class="anchor" aria-label="anchor" href="#arg-time-unit"></a></dt>
<dd><p><code>character</code>; Allows you to specify the unit in which times
are expressed in the answer: "hour", "minute" or "second" (minutes by
default).</p></dd>


<dt id="arg-distance-unit">distance_unit<a class="anchor" aria-label="anchor" href="#arg-distance-unit"></a></dt>
<dd><p><code>character</code>; Allows you to specify the unit in which
distances are expressed in the answer: "meter" or "kilometer" (meter by
default).</p></dd>


<dt id="arg-direction">direction<a class="anchor" aria-label="anchor" href="#arg-direction"></a></dt>
<dd><p><code>character</code>; Direction of travel. Either define a
"departure" point and obtain the potential arrival points. Or define an
"arrival" point and obtain the potential points ("departure" by default).</p></dd>


<dt id="arg-source">source<a class="anchor" aria-label="anchor" href="#arg-source"></a></dt>
<dd><p><code>character</code>; This parameter specifies which source will
be used for the calculation. Currently, "valhalla" and "pgr" sources are
available (default "pgr"). See section <code>SOURCE</code> for further information.</p></dd>


<dt id="arg-constraints">constraints<a class="anchor" aria-label="anchor" href="#arg-constraints"></a></dt>
<dd><p>Used to express constraints on the characteristics
to calculate isochrones/isodistances. See section <code>CONSTRAINTS</code>.</p></dd>


<dt id="arg-dist">dist<a class="anchor" aria-label="anchor" href="#arg-dist"></a></dt>
<dd><p><code>numeric</code>; A quantity of time.</p></dd>


<dt id="arg-unit">unit<a class="anchor" aria-label="anchor" href="#arg-unit"></a></dt>
<dd><p>see <code>time_unit</code> and <code>distance_unit</code> param.</p></dd>


<dt id="arg-time">time<a class="anchor" aria-label="anchor" href="#arg-time"></a></dt>
<dd><p><code>numeric</code>; A quantity of time.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>object of class <code>sf</code> with <code>POLYGON</code> geometry</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>get_isodistance()</code>: Wrapper function to calculate isodistance from get_iso.</p></li>
<li><p><code>get_isochrone()</code>: Wrapper function to calculate isochrone from get_iso.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="source">SOURCE<a class="anchor" aria-label="anchor" href="#source"></a></h2>



<p>Isochrones are calculated using the same resources as for route calculation.
PGR" and "VALHALLA" resources are used, namely "bdtopo-valhalla" and "bdtopo-pgr".</p><ul><li><p>bdtopo-valhalla" : To-Do</p></li>
<li><p>bdtopo-iso" is based on the old services over a certain distance, to solve
performance problems. We recommend its use for large isochrones.</p></li>
</ul><p>PGR resources are resources that use the PGRouting engine to calculate
isochrones. ISO resources are more generic. The engine used for calculations
varies according to several parameters. At present, the parameter concerned
is cost_value, i.e. the requested time or distance.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>get_isodistance, get_isochrone</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># All area i can acces in less than 5 minute from penmarch centroid</span></span></span>
<span class="r-in"><span><span class="va">penmarch</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_apicarto_cadastre.html">get_apicarto_cadastre</a></span><span class="op">(</span><span class="st">"29158"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">penmarch_centroid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">penmarch</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">isochrone</span> <span class="op">&lt;-</span> <span class="fu">get_isochrone</span><span class="op">(</span><span class="va">penmarch_centroid</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">penmarch</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">isochrone</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">penmarch_centroid</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># All area i can acces as pedestrian in less than 1km</span></span></span>
<span class="r-in"><span><span class="va">isodistance</span> <span class="op">&lt;-</span> <span class="fu">get_isodistance</span><span class="op">(</span><span class="va">penmarch_centroid</span>, <span class="fl">1</span>, unit <span class="op">=</span> <span class="st">"kilometer"</span>, profile <span class="op">=</span> <span class="st">"pedestrian"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">penmarch</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">isodistance</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">penmarch_centroid</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># In case of multiple point provided, the output will contain as many polygons as points.</span></span></span>
<span class="r-in"><span><span class="va">code_insee</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"29158"</span>, <span class="st">"29072"</span>, <span class="st">"29171"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">communes_centroid</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_apicarto_cadastre.html">get_apicarto_cadastre</a></span><span class="op">(</span><span class="va">code_insee</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">isochrones</span> <span class="op">&lt;-</span> <span class="fu">get_isochrone</span><span class="op">(</span><span class="va">communes_centroid</span>, <span class="fl">8</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">isochrones</span><span class="op">$</span><span class="va">code_insee</span> <span class="op">&lt;-</span> <span class="va">code_insee</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">isochrones</span>, fill <span class="op">=</span> <span class="st">"code_insee"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Find area where i can acces all communes centroid in less than 8 minutes</span></span></span>
<span class="r-in"><span><span class="va">area</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_intersection</a></span><span class="op">(</span><span class="va">isochrones</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">communes_centroid</span>, fill <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span><span class="op">+</span> <span class="fu"><a href="https://r-tmap.github.io/tmap/reference/qtm.html" class="external-link">qtm</a></span><span class="op">(</span><span class="va">area</span><span class="op">[</span><span class="va">area</span><span class="op">$</span><span class="va">origins</span> <span class="op">==</span> <span class="st">"1:3"</span>,<span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Carteron.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

