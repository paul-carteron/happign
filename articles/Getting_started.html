<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="happign">
<title>Getting started with happign • happign</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with happign">
<meta property="og:description" content="happign">
<meta property="og:image" content="https://paul-carteron.github.io/happign/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">happign</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Getting_started.html">Getting started with happign</a>
    <a class="dropdown-item" href="../articles/SCAN_25_SCAN_100_SCAN_OACI.html">SCAN 25, SCAN 100 et SCAN OACI</a>
    <a class="dropdown-item" href="../articles/web_only/happign_for_foresters.html">happign for foresters</a>
    <a class="dropdown-item" href="../articles/web_only/Non_functional_APIs.html">Non-functional APIs</a>
    <a class="dropdown-item" href="../articles/web_only/resolution_for_raster.html">Resolution for raster</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/paul-carteron/happign/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Getting_started_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started with happign</h1>
                        <h4 data-toc-skip class="author">Paul Carteron</h4>
            
            <h4 data-toc-skip class="date">2022-03-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/paul-carteron/happign/blob/HEAD/vignettes/Getting_started.Rmd" class="external-link"><code>vignettes/Getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>Getting_started.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="before-starting">Before starting<a class="anchor" aria-label="anchor" href="#before-starting"></a>
</h2>
<p>We can load the <code>happign</code> package, and some additional packages we will need while we are here.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/paul-carteron" class="external-link">happign</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-tmap/tmap" class="external-link">tmap</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-wfs-wms-service">The WFS, WMS service<a class="anchor" aria-label="anchor" href="#the-wfs-wms-service"></a>
</h2>
<p><code>happign</code> use two data type from IGN web service :</p>
<ul>
<li>WMS raster : data in raster format (.tiff)</li>
<li>WFS : data in shape format (.shp).</li>
</ul>
<p>More detailed information are available <a href="https://www.ogc.org/standards/wms" class="external-link">here</a> for WMS and <a href="https://www.ogc.org/standards/wfs" class="external-link">here</a> for WFS.</p>
<p>To download data you need :</p>
<ul>
<li>Its layer name ;</li>
<li>The API key corresponding to the layer ;</li>
<li>Your area of interest in .shp format</li>
</ul>
<p>The layer name and API key can be directly retrieved on the <a href="https://geoservices.ign.fr/services-web-experts" class="external-link">IGN website in the expert web services</a> (I recommend you at this point to go and have a look).</p>
<p>For example, if I take the first category “Administratif”, I see that the API key is “administratif” and the first layer name in WFS format is “ADMINEXPRESS-COG.LATEST:arrondissement”</p>
<p>With <code>happign</code>, there is no need to go through the website because all api keys are available by running the function <code><a href="../reference/get_apikeys.html">get_apikeys()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_apikeys.html">get_apikeys</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;  [1] "administratif" "adresse"       "agriculture"   "altimetrie"   </span>
<span class="co">#&gt;  [5] "cartes"        "cartovecto"    "clc"           "economie"     </span>
<span class="co">#&gt;  [9] "environnement" "geodesie"      "lambert93"     "ortho"        </span>
<span class="co">#&gt; [13] "orthohisto"    "parcellaire"   "satellite"     "sol"          </span>
<span class="co">#&gt; [17] "topographie"   "transports"</span></code></pre></div>
<p>After choosing the API key containing our resource, you can access all layer names with <code><a href="../reference/get_layers_metadata.html">get_layers_metadata()</a></code>.</p>
<p><strong><em>Rq :</em></strong></p>
<ul>
<li><em>This function can be a bit slow because it connects directly to the website so that the information is up to date.</em></li>
<li>*The returned data correspond to the intersection with the shape <strong>bbox</strong>.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">apikey</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_apikeys.html">get_apikeys</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
<span class="fu"><a href="../reference/get_layers_metadata.html">get_layers_metadata</a></span><span class="op">(</span>apikey <span class="op">=</span> <span class="va">apikey</span>, data_type <span class="op">=</span> <span class="st">"wfs"</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 36 x 8</span></span>
<span class="co">#&gt;    itemindex name            title abstract keywords defaultcrs wgs84boundingbox</span>
<span class="co">#&gt;        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>         1 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>         2 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>         3 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>         4 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>         5 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>         6 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>         7 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>         8 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>         9 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span>        10 ADMINEXPRESS-C~ ADMI~ édition~ Unités ~ 4326       -61.80983861776~</span>6~
<span class="co">#&gt; <span style="color: #949494;"># ... with 26 more rows, and 1 more variable: metadataurl &lt;chr&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="downloading-the-data">Downloading the data<a class="anchor" aria-label="anchor" href="#downloading-the-data"></a>
</h2>
<div class="section level3">
<h3 id="wfs">WFS<a class="anchor" aria-label="anchor" href="#wfs"></a>
</h3>
<p>For the example we will look at the beautiful town of Penmarch in France and we are going to get these borders.</p>
<p>The <code><a href="../reference/get_wfs.html">get_wfs()</a></code> function connects to WFS service of the IGN that contain borders of the communes. It is also necessary to take a point inside penmarch so that the function detects all the shape that intersect this point.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">penmarch_point</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4.370</span>, <span class="fl">47.800</span><span class="op">)</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span>
<span class="va">penmarch_borders</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_wfs.html">get_wfs</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">penmarch_point</span>,
                            apikey <span class="op">=</span> <span class="st">"administratif"</span>,
                            layer_name <span class="op">=</span> <span class="st">"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune"</span><span class="op">)</span>
<span class="co">#&gt; Request 1/1 downloading...</span>

<span class="co"># Checking result</span>
<span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">penmarch_borders</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Borders of penmarch</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
<span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">penmarch_point</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Point use to retrieve data</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_symbols.html" class="external-link">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_add_legend.html" class="external-link">tm_add_legend</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"symbol"</span>, label <span class="op">=</span> <span class="st">"lat : -4.370, long : 47.800"</span>,
                 col <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_layout.html" class="external-link">tm_layout</a></span><span class="op">(</span>main.title <span class="op">=</span> <span class="st">"Penmarch borders from IGN"</span>,
             main.title.position <span class="op">=</span> <span class="st">"center"</span>,
             legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"right"</span>, <span class="st">"bottom"</span><span class="op">)</span>,
             frame <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="Getting_started_files/figure-html/unnamed-chunk-5-1.png" width="576" style="display: block; margin: auto;"></p>
<p>It’s as simple as that! Now you have to rely on your curiosity to explore the multiple possibilities that IGN offers. For example, who has never wondered how many road junctions there are in Penmarch?</p>
<p><em>Spoiler : there are 220 of them</em></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dikes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_wfs.html">get_wfs</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">penmarch_borders</span>,
                 apikey <span class="op">=</span> <span class="fu"><a href="../reference/get_apikeys.html">get_apikeys</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span>,
                 layer_name <span class="op">=</span> <span class="st">"BDCARTO_BDD_WLD_WGS84G:noeud_routier"</span><span class="op">)</span>
<span class="co">#&gt; Request 1/1 downloading...</span>

<span class="co"># Checking result</span>
<span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">penmarch_borders</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Borders of penmarch</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_polygons.html" class="external-link">tm_polygons</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
<span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">dikes</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Point use to retrieve data</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_symbols.html" class="external-link">tm_dots</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_add_legend.html" class="external-link">tm_add_legend</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"symbol"</span>, label <span class="op">=</span> <span class="st">"Road junction"</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_layout.html" class="external-link">tm_layout</a></span><span class="op">(</span>main.title <span class="op">=</span> <span class="st">"Road nodes recorded by the IGN in Penmarch"</span>,
             main.title.position <span class="op">=</span> <span class="st">"center"</span>,
             legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"right"</span>, <span class="st">"bottom"</span><span class="op">)</span>,
             frame <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="Getting_started_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="wms-raster">WMS raster<a class="anchor" aria-label="anchor" href="#wms-raster"></a>
</h3>
<p>/! Code below isn’t evaluated because raster needs to be downloaded to disk. I can only recommend you to try it yourself.</p>
<p>For raster, the process is the same but with the function <code><a href="../reference/get_wms_raster.html">get_wms_raster()</a></code>. There’s plenty of elevation resources inside <a href="https://geoservices.ign.fr/services-web-experts-altimetrie" class="external-link">“altimetrie” category</a>. The basic one is the Digital Elevation Model (DEM or MNT in French).</p>
<p><strong><em>Rq :</em></strong></p>
<ul>
<li><em>The raster is not loaded into R’s memory. It is an on-the-fly sequential reading of files from network, without downloading the whole file first. In other words, it is quite possible to access the DEM of an entire region. The counterpart is the connection time which is about 30s;</em></li>
<li><em>Raster from <code><a href="../reference/get_wms_raster.html">get_wms_raster()</a></code> are stars object from the <code>stars</code> package. To learn more about conversion between other raster type in R go <a href="https://geocompr.github.io/post/2021/spatial-classes-conversion/" class="external-link">check this out</a>.</em></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">apikey</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_apikeys.html">get_apikeys</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>
<span class="va">layers_metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_layers_metadata.html">get_layers_metadata</a></span><span class="op">(</span><span class="st">"altimetrie"</span>, <span class="st">"wms"</span><span class="op">)</span>
<span class="va">dem_layer_name</span> <span class="op">&lt;-</span> <span class="va">layers_metadata</span><span class="op">[</span><span class="fl">2</span>, <span class="st">"name"</span><span class="op">]</span>

<span class="va">mnt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_wms_raster.html">get_wms_raster</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">penmarch_borders</span>,
                      apikey <span class="op">=</span> <span class="va">apikey</span>,
                      layer_name <span class="op">=</span> <span class="va">dem_layer_name</span>,
                      resolution <span class="op">=</span> <span class="fl">25</span>,
                      filename <span class="op">=</span> <span class="st">"best_raster_name"</span><span class="op">)</span>

<span class="va">mnt</span><span class="op">[</span><span class="va">mnt</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span> <span class="co"># remove negative values in case of singularity</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mnt</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Elevation [m]"</span> <span class="co"># Rename raster ie the title legend</span>

<span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_shape.html" class="external-link">tm_shape</a></span><span class="op">(</span><span class="va">mnt</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_raster.html" class="external-link">tm_raster</a></span><span class="op">(</span>colorNA <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span>
   <span class="fu"><a href="https://rdrr.io/pkg/tmap/man/tm_layout.html" class="external-link">tm_layout</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"DEM of Penmarch"</span>, frame <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Paul Carteron.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
